(()=>{"use strict";var e={d:(t,l)=>{for(var o in l)e.o(l,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:l[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{F1:()=>a,uA:()=>c,hM:()=>u,Ex:()=>h});let t=document.querySelector("#boardPlayer1"),l=document.querySelector("#boardCPU");class o{constructor(){this.board=null,this.data=null,this.shipId=null,this.length=null,this.hover=!0,this.coords=[{coord:null,hit:!1,shipDiv:null},{coord:null,hit:!1,shipDiv:null},{coord:null,hit:!1,shipDiv:null},{coord:null,hit:!1,shipDiv:null}],this.isSunk=!1}onHit(){let e=!0;for(let t=0;t<this.length;t++)!1===this.coords[t].hit&&(e=!1);!0===e&&(this.coords[0].shipDiv.parentElement.classList.add("shipSunk"),this.isSunk=!0,this.onSunk())}onSunk(){let e=document.getElementById("displayWin"),t=document.getElementById("winnerTxt"),l=!0;h.forEach((e=>{!1===e.isSunk&&(l=!1)}));let o=!0;u.forEach((e=>{!1===e.isSunk&&(o=!1)})),!0===o?(e.style.display="flex",t.textContent="Player 1"):!0===l&&(e.style.display="flex",t.textContent="C P U")}valided(e){let t=this.length-1;return e<10&&e+t<10||e>=10&&e<20&&e+t<20||e>=20&&e<30&&e+t<30||e>=30&&e<40&&e+t<40||e>=40&&e<50&&e+t<50||e>=50&&e<60&&e+t<60||e>=60&&e<70&&e+t<70||e>=70&&e<80&&e+t<80||e>=80&&e<90&&e+t<90||e>=90&&e<100&&e+t<100}isEmpty(e,t,l){let o=!0,d=0;d=e;for(let e=0;e<this.length;e++)t.forEach((e=>{e.coords.forEach((e=>{e.coord===d&&(o=!1)}))})),0===l?d+=10:d++;return o}}let d=0;function i(e,t,l,o){let i=Number(t.lastChild.textContent),n=0;if(0===d)if(i+10*(e.length-1)<100&&!0===e.isEmpty(i,h,d)){n=i;for(let t=0;t<e.length;t++)c[n].style.backgroundColor="blue",n+=10;t.style.cursor="pointer",t.onclick=function(){n=i;for(let t=0;t<e.length;t++)e.coords[t].coord=n,e.coords[t].shipDiv=o[t],c[n].style.backgroundColor="blue",c[n].classList.add("onShip"),c[n].disabled="disabled",c[n].style.cursor="not-allowed",n+=10;l.disabled=!1,l.click(),l.disabled=!0,e.hover=!1}}else t.style.cursor="not-allowed";else if(!0===e.valided(i)&&!0===e.isEmpty(i,h,d)){n=i;for(let t=0;t<e.length;t++)c[n].style.backgroundColor="blue",n++;t.style.cursor="pointer",t.onclick=function(){n=i;for(let t=0;t<e.length;t++)e.coords[t].coord=n,e.coords[t].shipDiv=o[t],c[n].style.backgroundColor="blue",c[n].classList.add("onShip"),c[n].disabled="disabled",c[n].style.cursor="not-allowed",n++;e.hover=!1,l.disabled=!1,l.click(),l.disabled=!0}}else t.style.cursor="not-allowed"}const n=function(){let e=[],t=document.querySelectorAll("#boardPlayer1 fieldset");for(let t=0;t<c.length;t++)e[t]=Number(c[t].lastChild.textContent);t.forEach((e=>{e.disabled="disabled",e.style.cursor="not-allowed"})),function(e){let t=document.querySelectorAll("#boardCPU fieldset");function l(){let t=Number(this.lastChild.textContent),l=!0;u.forEach((e=>{e.coords.forEach((o=>{o.coord===t&&(a[o.coord].classList.remove("empty"),a[o.coord].classList.add("active"),o.hit=!0,o.shipDiv.classList.add("hit"),l=!1,e.onHit())}))})),!0===l&&(a[t].classList.remove("empty"),a[t].classList.add("fail")),a[t].disabled="disabled",a[t].style.cursor="not-allowed",function(e){let t=Math.floor(Math.random()*e.length),l=e[t],o=!0;h.forEach((e=>{e.coords.forEach((t=>{t.coord===l&&(c[t.coord].classList.add("active"),t.hit=!0,t.shipDiv.classList.add("hit"),o=!1,e.onHit())}))})),!0===o&&(c[l].classList.remove("empty"),c[l].classList.add("fail")),c[l].style.cursor="not-allowed",e.splice(t,1)}(e)}t.forEach((e=>{e.classList.remove("onShip"),e.classList.add("empty")})),t.forEach((e=>e.addEventListener("click",l)))}(e)};let s=0;function r(e,t){let l=0;for(s=Math.floor(2*Math.random());!0===e.hover;){let o=Math.floor(100*Math.random());if(0===s&&o+10*(e.length-1)<100&&!0===e.isEmpty(o,u,s)){l=o;for(let o=0;o<e.length;o++)e.coords[o].coord=l,e.coords[o].shipDiv=t[o],l+=10;e.hover=!1}else if(1===s&&!0===e.valided(o)&&!0===e.isEmpty(o,u,s)){l=o;for(let o=0;o<e.length;o++)e.coords[o].coord=l,e.coords[o].shipDiv=t[o],l++;e.hover=!1}}}let c=[],a=[],h=[],u=[];(function(e,o){t.style.setProperty("--grid-rows",e),t.style.setProperty("--grid-cols",o),l.style.setProperty("--grid-rows",e),l.style.setProperty("--grid-cols",o);for(let d=0;d<e*o;d++){let e=document.createElement("fieldset"),o=document.createElement("p");o.textContent=d,c[d]=e,t.appendChild(e),e.appendChild(o);let i=document.createElement("fieldset"),n=document.createElement("p");n.textContent=d,a[d]=i,l.appendChild(i),i.appendChild(n)}})(10,10),function(){let e=document.querySelectorAll("#boardPlayer1 fieldset");document.getElementById("btnRotate").addEventListener("click",(function(){d=0===d?1:0}));let t=document.querySelectorAll(".contentShipBoard button");function l(){t.forEach((e=>e.classList.remove("shipActive"))),this.classList.add("shipActive")}function n(){e.forEach((e=>e.style.backgroundColor="rgba(238, 238, 238, 0.8)")),h.forEach((e=>{e.coords.forEach((e=>{null!==e.coord&&(c[e.coord].style.backgroundColor="blue")}))}))}t.forEach((e=>e.addEventListener("click",l))),e.forEach((e=>e.addEventListener("mouseout",n))),function(e){let t=document.getElementById("btnShipBigPlayer");t.addEventListener("click",(function(){t.disabled=!0;let d=new o;h.push(d),d.board="Player 1",d.data="Big",d.shipId=1,d.length=4,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===d.hover&&i(d,e,l,this.children)}))))})),t.click();let l=document.getElementById("btnShipMedium1Player");l.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Medium",t.shipId=1,t.length=3,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&i(t,e,d,this.children)}))))}));let d=document.getElementById("btnShipMedium2Player");d.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Medium",t.shipId=2,t.length=3,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&i(t,e,n,this.children)}))))}));let n=document.getElementById("btnShipSmall1Player");n.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Small",t.shipId=1,t.length=2,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&i(t,e,s,this.children)}))))}));let s=document.getElementById("btnShipSmall2Player");s.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Small",t.shipId=2,t.length=2,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&i(t,e,r,this.children)}))))}));let r=document.getElementById("btnShipSmall3Player");r.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Small",t.shipId=3,t.length=2;let l=document.getElementById("btnShipBigCPU");e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&i(t,e,l,this.children)}))))}))}(e)}(),function(){let e=document.querySelectorAll(".contentShipBoard button");function t(){e.forEach((e=>e.classList.remove("shipActive"))),this.classList.add("shipActive")}e.forEach((e=>e.addEventListener("click",t))),function(){document.getElementById("btnShipBigCPU").addEventListener("click",(function(){let t=new o;u.push(t),t.board="CPU",t.data="Big",t.shipId=1,t.length=4,setTimeout((()=>{e.disabled=!1,e.click(),e.disabled=!0}),1e3),r(t,this.children)}));let e=document.getElementById("btnShipMedium1CPU");e.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Medium",e.shipId=1,e.length=3,setTimeout((()=>{t.disabled=!1,t.click(),t.disabled=!0}),1e3),r(e,this.children)}));let t=document.getElementById("btnShipMedium2CPU");t.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Medium",e.shipId=2,e.length=3,setTimeout((()=>{l.disabled=!1,l.click(),l.disabled=!0}),1e3),r(e,this.children)}));let l=document.getElementById("btnShipSmall1CPU");l.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Small",e.shipId=1,e.length=2,setTimeout((()=>{d.disabled=!1,d.click(),d.disabled=!0}),1e3),r(e,this.children)}));let d=document.getElementById("btnShipSmall2CPU");d.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Small",e.shipId=2,e.length=2,setTimeout((()=>{i.disabled=!1,i.click(),i.disabled=!0}),1e3),r(e,this.children)}));let i=document.getElementById("btnShipSmall3CPU");i.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Small",e.shipId=3,e.length=2,setTimeout((()=>{i.classList.remove("shipActive")}),1e3),r(e,this.children),n()}))}()}()})();