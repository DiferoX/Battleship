(()=>{"use strict";var e={d:(t,l)=>{for(var o in l)e.o(l,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:l[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{F1:()=>a,uA:()=>c,hM:()=>u,Ex:()=>h});let t=document.querySelector("#boardPlayer1"),l=document.querySelector("#boardCPU");class o{constructor(){this.board=null,this.data=null,this.shipId=null,this.length=null,this.hover=!0,this.coords=[{coord:null,hit:!1,shipDiv:null},{coord:null,hit:!1,shipDiv:null},{coord:null,hit:!1,shipDiv:null},{coord:null,hit:!1,shipDiv:null}],this.isSunk=!1}onHit(){let e=!0;for(let t=0;t<this.length;t++)!1===this.coords[t].hit&&(e=!1);!0===e&&(this.coords[0].shipDiv.parentElement.classList.add("shipSunk"),this.isSunk=!0,this.onSunk())}onSunk(){let e=!0;h.forEach((t=>{!1===t.isSunk&&(e=!1)}));let t=!0;u.forEach((e=>{!1===e.isSunk&&(t=!1)})),!0===e?alert("Player 1 Win"):!0===t&&alert("CPU Win")}valided(e){let t=this.length-1;return e<10&&e+t<10||e>=10&&e<20&&e+t<20||e>=20&&e<30&&e+t<30||e>=30&&e<40&&e+t<40||e>=40&&e<50&&e+t<50||e>=50&&e<60&&e+t<60||e>=60&&e<70&&e+t<70||e>=70&&e<80&&e+t<80||e>=80&&e<90&&e+t<90||e>=90&&e<100&&e+t<100}isEmpty(e,t,l){let o=!0,i=0;i=e;for(let e=0;e<this.length;e++)t.forEach((e=>{e.coords.forEach((e=>{e.coord===i&&(o=!1)}))})),0===l?i+=10:i++;return o}}let i=0;function n(e,t,l,o){let n=Number(t.lastChild.textContent),d=0;if(0===i)if(n+10*(e.length-1)<100&&!0===e.isEmpty(n,h,i)){d=n;for(let t=0;t<e.length;t++)c[d].style.backgroundColor="blue",d+=10;t.style.cursor="pointer",t.onclick=function(){d=n;for(let t=0;t<e.length;t++)e.coords[t].coord=d,e.coords[t].shipDiv=o[t],c[d].style.backgroundColor="blue",c[d].classList.add("onShip"),d+=10;l.disabled=!1,l.click(),l.disabled=!0,e.hover=!1}}else t.style.cursor="not-allowed";else if(!0===e.valided(n)&&!0===e.isEmpty(n,h,i)){d=n;for(let t=0;t<e.length;t++)c[d].style.backgroundColor="blue",d++;t.style.cursor="pointer",t.onclick=function(){d=n;for(let t=0;t<e.length;t++)e.coords[t].coord=d,e.coords[t].shipDiv=o[t],c[d].style.backgroundColor="blue",c[d].classList.add("onShip"),d++;e.hover=!1,l.disabled=!1,l.click(),l.disabled=!0}}else t.style.cursor="not-allowed"}const d=function(){let e=[],t=document.querySelectorAll("#boardPlayer1 div");for(let t=0;t<c.length;t++)e[t]=Number(c[t].lastChild.textContent);t.forEach((e=>{e.classList.remove("onShip"),e.classList.add("empty")})),function(e){let t=document.querySelectorAll("#boardCPU div");function l(){let t=Number(this.lastChild.textContent),l=!0;u.forEach((e=>{e.coords.forEach((o=>{o.coord===t&&(a[o.coord].classList.remove("empty"),a[o.coord].classList.add("active"),o.hit=!0,o.shipDiv.classList.add("hit"),l=!1,e.onHit())}))})),!0===l&&(a[t].classList.remove("empty"),a[t].classList.add("fail")),function(e){let t=Math.floor(Math.random()*e.length),l=e[t],o=!0;h.forEach((e=>{e.coords.forEach((t=>{t.coord===l&&(c[t.coord].classList.add("active"),t.hit=!0,t.shipDiv.classList.add("hit"),o=!1,e.onHit())}))})),!0===o&&(c[l].classList.remove("empty"),c[l].classList.add("fail")),e.splice(t,1),console.log(e)}(e)}t.forEach((e=>{e.classList.remove("onShip"),e.classList.add("empty")})),t.forEach((e=>e.addEventListener("click",l)))}(e)};let r=0;function s(e,t){let l=0;for(r=Math.floor(2*Math.random());!0===e.hover;){let o=Math.floor(100*Math.random());if(0===r&&o+10*(e.length-1)<100&&!0===e.isEmpty(o,u,r)){l=o;for(let o=0;o<e.length;o++)a[l].style.backgroundColor="red",e.coords[o].coord=l,e.coords[o].shipDiv=t[o],l+=10;e.hover=!1}else if(1===r&&!0===e.valided(o)&&!0===e.isEmpty(o,u,r)){l=o;for(let o=0;o<e.length;o++)a[l].style.backgroundColor="red",e.coords[o].coord=l,e.coords[o].shipDiv=t[o],l++;e.hover=!1}}}let c=[],a=[],h=[],u=[];(function(e,o){t.style.setProperty("--grid-rows",e),t.style.setProperty("--grid-cols",o),l.style.setProperty("--grid-rows",e),l.style.setProperty("--grid-cols",o);for(let i=0;i<e*o;i++){let e=document.createElement("div"),o=document.createElement("p");o.textContent=i,c[i]=e,t.appendChild(e),e.appendChild(o);let n=document.createElement("div"),d=document.createElement("p");d.textContent=i,a[i]=n,l.appendChild(n),n.appendChild(d)}})(10,10),function(){let e=document.querySelectorAll("#boardPlayer1 div");document.getElementById("btnRotate").addEventListener("click",(function(){i=0===i?1:0}));let t=document.querySelectorAll(".contentShipBoard button");function l(){t.forEach((e=>e.classList.remove("shipActive"))),this.classList.add("shipActive")}function d(){e.forEach((e=>e.style.backgroundColor="rgba(238, 238, 238, 0.8)")),h.forEach((e=>{e.coords.forEach((e=>{null!==e.coord&&(c[e.coord].style.backgroundColor="blue")}))}))}t.forEach((e=>e.addEventListener("click",l))),e.forEach((e=>e.addEventListener("mouseout",d))),function(e){let t=document.getElementById("btnShipBigPlayer");t.addEventListener("click",(function(){t.disabled=!0;let i=new o;h.push(i),i.board="Player 1",i.data="Big",i.shipId=1,i.length=4,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===i.hover&&n(i,e,l,this.children)}))))})),t.click();let l=document.getElementById("btnShipMedium1Player");l.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Medium",t.shipId=1,t.length=3,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&n(t,e,i,this.children)}))))}));let i=document.getElementById("btnShipMedium2Player");i.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Medium",t.shipId=2,t.length=3,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&n(t,e,d,this.children)}))))}));let d=document.getElementById("btnShipSmall1Player");d.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Small",t.shipId=1,t.length=2,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&n(t,e,r,this.children)}))))}));let r=document.getElementById("btnShipSmall2Player");r.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Small",t.shipId=2,t.length=2,e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&n(t,e,s,this.children)}))))}));let s=document.getElementById("btnShipSmall3Player");s.addEventListener("click",(function(){let t=new o;h.push(t),t.board="Player 1",t.data="Small",t.shipId=3,t.length=2;let l=document.getElementById("btnShipBigCPU");e.forEach((e=>e.addEventListener("mouseover",(()=>{!0===t.hover&&n(t,e,l,this.children)}))))}))}(e)}(),function(){let e=document.querySelectorAll(".contentShipBoard button");function t(){e.forEach((e=>e.classList.remove("shipActive"))),this.classList.add("shipActive")}e.forEach((e=>e.addEventListener("click",t))),function(){document.getElementById("btnShipBigCPU").addEventListener("click",(function(){let t=new o;u.push(t),t.board="CPU",t.data="Big",t.shipId=1,t.length=4,setTimeout((()=>{e.disabled=!1,e.click(),e.disabled=!0}),1e3),s(t,this.children)}));let e=document.getElementById("btnShipMedium1CPU");e.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Medium",e.shipId=1,e.length=3,setTimeout((()=>{t.disabled=!1,t.click(),t.disabled=!0}),1e3),s(e,this.children)}));let t=document.getElementById("btnShipMedium2CPU");t.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Medium",e.shipId=2,e.length=3,setTimeout((()=>{l.disabled=!1,l.click(),l.disabled=!0}),1e3),s(e,this.children)}));let l=document.getElementById("btnShipSmall1CPU");l.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Small",e.shipId=1,e.length=2,setTimeout((()=>{i.disabled=!1,i.click(),i.disabled=!0}),1e3),s(e,this.children)}));let i=document.getElementById("btnShipSmall2CPU");i.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Small",e.shipId=2,e.length=2,setTimeout((()=>{n.disabled=!1,n.click(),n.disabled=!0}),1e3),s(e,this.children)}));let n=document.getElementById("btnShipSmall3CPU");n.addEventListener("click",(function(){let e=new o;u.push(e),e.board="CPU",e.data="Small",e.shipId=3,e.length=2,setTimeout((()=>{n.classList.remove("shipActive")}),1e3),s(e,this.children),d()}))}()}()})();